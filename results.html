<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Search Results</title>
    <link type="text/css" rel="stylesheet" href="navbar.css"/>
    <meta charset="utf-8"/>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto');
        body {
            font-family: 'Roboto';
            margin: 0;
            padding: 0;
        }
        .results {
            background-color: rgb(194, 194, 194);
        }
        .details {
            background-color: rgb(194, 194, 194);
            height: 5vh;
            display: none;
        }
        .resultsup {
            display: flex;
        }
        img {
            height: 100px;
            width: 100px;
        }
        .name {
            margin-left: 10vw;
            width: 15vw;
        }
        .icons {
            display: flex;
            background-color: rgb(102, 102, 102);
            float: right;
            height: 80px;
            margin-top: 10px;
            margin-left: 40vw;
        }
        .location {
            background-color: white;
            margin: 5px;
            width: 50px;
            text-align: center;
            padding-top: 25px;
        }
        .price {
            background-color: white;
            margin: 5px;
            width: 50px;
            text-align: center;
            padding-top: 25px;
        }
        .vegetarian {
            background-color: white;
            margin: 5px;
            width: 50px;
            text-align: center;
            padding-top: 25px;
        }
        .eco {
            background-color: white;
            margin: 5px;
            width: 50px;
            text-align: center;
            padding-top: 25px;
        }
    </style>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
    <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase.js"></script>
    <script src="setup_firebase.js"></script>
  </head>
  <body>
      
    <header>
            <div class="title">
                <img class="logo" src="assets\logo2.png">
                <p class="titleword">Campus Caterer</p>
            </div>
            <div class="line"></div>
            <nav id="navbar">
            <ul>
                <li><a href=NavigationPage.html class="navitext"><div class="home">Home</div></a></li>
                <li><a href=page_2.html class="navitext"><div class="profile">Profile</div></a></li>
                <li><a href=results.html class="navitext"><div class="search">Search</div></a></li>
                <li><a href=GuidePage.html class="navitext"><div class="guide">Guides</div></a></li>
            </ul>
            </nav>
            <script>
                $(".home").hover(function() {
                    $(".home").css("color", "white"); 
                },
                function() {
                    $(".home").css("color", "#484747"); 
                });
                $(".profile").hover(function() {
                    $(".profile").css("color", "white"); 
                },
                function() {
                    $(".profile").css("color", "#484747"); 
                });
                $(".search").hover(function() {
                    $(".search").css("color", "white"); 
                },
                function() {
                    $(".search").css("color", "#484747"); 
                });
                $(".guide").hover(function() {
                    $(".guide").css("color", "white"); 
                },
                function() {
                    $(".guide").css("color", "#484747"); 
                });
            </script>
        </header>  

    <div id="coastal" class="results">
      <div class="resultsup">
          <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
          <p class="name">Coastal Kitchen</p>
          <div class ="icons">
              <p class="location">SE12</p>
              <p class="price">$</p>
              <p class="vegetarian">V</p>
              <p class="eco">1</p>
          </div>
      </div>
      <div id="details1" class="details">Detailed Information:</div>
        <p class="details">Location: SW2, cafeteria area</p>
        <p class="details">Price: $5-$20</p>
        <p class="details">Food: Asian, Japanese, Rice, Sushi, Vegetarian options available</p>
    </div>
    <br/>

    <div id="cool" class="results">
        <div class="resultsup">
            <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
            <p class="name">The Cool Rooftop</p>
            <div class ="icons">
                <p class="location">SE1</p>
                <p class="price">$-$$</p>
                <p class="vegetarian">V</p>
                <p class="eco">5</p>
            </div>
        </div>
      <p id="details2" class="details">Information</p>
    </div>
    <br/>

    <div id="emerald" class="results">
        <div class="resultsup">
            <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
            <p class="name">Emerald Salmon</p>
            <div class ="icons">
                <p class="location">SW2</p>
                <p class="price">$$</p>
                <p class="vegetarian">V</p>
                <p class="eco">4</p>
            </div>
        </div>
      <p id="details3" class="details">Information</p>
    </div>
    <br/>

    <div id="ivory" class="results">
            <div class="resultsup">
                <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
                <p class="name">L'Ivoire</p>
                <div class ="icons">
                    <p class="location">SW12</p>
                    <p class="price">$$$</p>
                    <p class="vegetarian">V</p>
                    <p class="eco">2</p>
                </div>
            </div>
      <p id="details4" class="details">Information</p>
    </div>
    <br/>

    <div id="modesty" class="results">
            <div class="resultsup">
                <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
                <p class="name">Modesty</p>
                <div class ="icons">
                    <p class="location">SW1</p>
                    <p class="price">$$</p>
                    <p class="vegetarian">V</p>
                    <p class="eco">3</p>
                </div>
            </div>
      <p id="details5" class="details">Information</p>
    </div>
    <br/>
    
    <div id="bear" class="results">
            <div class="resultsup">
                <img src="https://pbs.twimg.com/media/DxDoBI5XcAIDVIX.jpg" alt="food">
                <p class="name">The Wild Bear</p>
                <div class ="icons">
                    <p class="location">SE6</p>
                    <p class="price">$-$$</p>
                    <p class="vegetarian">V</p>
                    <p class="eco">4</p>
                </div>
            </div>
      <p id="details5" class="details">Information</p>
    </div>
    <br/>
    

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>

        $(document).ready(function() {
        /*<![CDATA[*/

          $(".results").click(function(){
              $(this).children(".details").slideToggle(250);
              $(this).children(".details").toggleClass('.details');
          });
          
          var authRef = firebase.auth();
            authRef.onAuthStateChanged(function(user) {
                var firebaseRef = firebase.database().ref("users/" + firebase.auth().currentUser.uid)
                /*if (user) {
                    console.log('Display name onAuthStateChanged : '+ user.displayName);
                    console.log(user.uid);
                    var uid = user.uid;
                    var user = firebase.auth().currentUser;
                }*/ 

                if (firebaseRef.once("value")
                    .then(function(snapshot) {
                        if (snapshot.hasChild("goal3")) {
                            $('#ivory').insertAfter( "#cool" );
                            $('#ivory').css('margin-top', '20px');
                            $('#emerald').insertAfter( "#ivory" );
                            $('#emerald').css('margin-top', '20px');
                            $('#bear').insertAfter( "#ivory" );
                            $('#bear').css('margin-top', '20px');
                            $('#modesty').insertAfter( "#bear" );
                            $('#modesty').css('margin-top', '20px');
                            $('#coastal').insertAfter( "#modesty" );
                            $('#coastal').css('margin-top', '20px');
                        }
                    })) {
                };

                if (firebaseRef.once("value")
                    .then(function(snapshot) {
                        if (snapshot.hasChild("goal1")) {
                            $('#emerald').insertAfter( "#cool" );
                            $('#emerald').css('margin-top', '20px');
                            $('#ivory').insertAfter( "#ivory" );
                            $('#ivory').css('margin-top', '20px');
                            $('#bear').insertAfter( "#ivory" );
                            $('#bear').css('margin-top', '20px');
                            $('#modesty').insertAfter( "#bear" );
                            $('#modesty').css('margin-top', '20px');
                            $('#coastal').insertAfter( "#modesty" );
                            $('#coastal').css('margin-top', '20px');
                        }
                    })) {
                }; 

                if (firebaseRef.once("value")
                    .then(function(snapshot) {
                        if (snapshot.hasChild("goal2")) {
                            $('#modesty').insertAfter( "#bear" );
                            $('#modesty').css('margin-top', '20px');
                            $('#ivory').insertAfter( "#modesty" );
                            $('#ivory').css('margin-top', '20px');
                            $('#cool').insertAfter( "#ivory" );
                            $('#cool').css('margin-top', '20px');
                            $('#emerald').insertAfter( "#cool" );
                            $('#emerald').css('margin-top', '20px');
                            $('#coastal').insertAfter( "#emerald" );
                            $('#coastal').css('margin-top', '20px');
                        }
                    })) {
                } 

                if (firebaseRef.once("value")
                    .then(function(snapshot) {
                        if (snapshot.hasChild("goal4")) {
                            $('#cool').insertAfter( "#coastal" );
                            $('#cool').css('margin-top', '20px');
                            $('#bear').insertAfter( "#cool" );
                            $('#bear').css('margin-top', '20px');
                            $('#modesty').insertAfter( "#bear" );
                            $('#modesty').css('margin-top', '20px');
                            $('#emerald').insertAfter( "#modesty" );
                            $('#emerald').css('margin-top', '20px');
                            $('#ivory').insertAfter( "#emerald" );
                            $('#ivory').css('margin-top', '20px');
                        }
                    })) {
                }; 

                if (firebaseRef.once("value")
                    .then(function(snapshot) {
                        if (snapshot.hasChild("goal5")) {
                            $('#bear').insertAfter( "#cool" );
                            $('#bear').css('margin-top', '20px');
                            $('#emerald').insertAfter( "#bear" );
                            $('#emerald').css('margin-top', '20px');
                            $('#modesty').insertAfter( "#emerald" );
                            $('#modesty').css('margin-top', '20px');
                            $('#ivory').insertAfter( "#modesty" );
                            $('#ivory').css('margin-top', '20px');
                            $('#coastal').insertAfter( "#ivory" );
                            $('#coastal').css('margin-top', '20px');
                        }
                    })) {
                };

            });
              
        });

    /*]]>*/
    </script>

  </body>
</html>
